const apiBooks = JSON.parse(`[{"key":"/works/OL1643770W","title":"JavaScript","edition_count":21,"cover_id":10737959,"cover_edition_key":"OL739825M","subject":["JavaScript (Computer program language)","Web servers","Object-oriented programming (Computer science)","JavaScript (Computer language)","Mathematics","Programming Languages","COMPUTERS","JavaScript","COMPUTER PROGRAMMING","COMPUTER PROGRAMS","PROGRAMMING LANGUAGES","OBJECT-ORIENTED PROGRAMMING","ALGORITHMS","FILE MAINTENANCE (COMPUTERS)","SOFTWARE TOOLS"],"ia_collection":["americana","americanuniversity-ol","bostonuniversitylibraries-ol","gwulibraries-ol","inlibrary","internetarchivebooks","ithacacollege-ol","kalamazoocollege-ol","occidentalcollegelibrary-ol","printdisabled","rochester-ol","schroederlibrary-ol","the-claremont-colleges-ol","unb-ol","uni-ol","universityofarizona-ol","wilsoncollege-ol"],"lendinglibrary":false,"printdisabled":true,"lending_edition":"OL739825M","lending_identifier":"javascriptdefin000flan","authors":[{"key":"/authors/OL183270A","name":"David Flanagan"},{"key":"/authors/OL3144731A","name":"James Guérin"}],"first_publish_year":1996,"ia":"javascriptdefin000flan","public_scan":false,"has_fulltext":true},{"key":"/works/OL5841457W","title":"Professional JavaScript for Web developers","edition_count":16,"cover_id":10724347,"cover_edition_key":"OL8051731M","subject":["Web site development","JavaScript (Computer program language)","Computer Technology","Nonfiction","JavaScript","Javascript (computer program language)","COMPUTERS","Web","Web Programming"],"ia_collection":[""],"lendinglibrary":false,"printdisabled":false,"lending_edition":"","lending_identifier":"","authors":[{"key":"/authors/OL1432776A","name":"Nicholas C. Zakas"}],"first_publish_year":2005,"ia":"professionaljava00zaka_826","public_scan":false,"has_fulltext":false},{"key":"/works/OL1643767W","title":"JavaScript","edition_count":12,"cover_id":10724321,"cover_edition_key":"OL8667289M","subject":["JavaScript (Computer program language)","Web site development","JavaScript (Langage de programmation)","COMPUTERS","Programming Languages","JavaScript"],"ia_collection":["binghamton-ol","china","inlibrary","internetarchivebooks","librarygenesis","printdisabled","the-claremont-colleges-ol","uni-ol","wrlc-ol"],"lendinglibrary":false,"printdisabled":true,"lending_edition":"OL8667289M","lending_identifier":"javascriptpocke000flan","authors":[{"key":"/authors/OL183270A","name":"David Flanagan"}],"first_publish_year":1998,"ia":"javascriptpocke000flan","public_scan":false,"has_fulltext":true},{"key":"/works/OL15859253W","title":"Dynamic HTML","edition_count":9,"cover_id":6821912,"cover_edition_key":"OL24768065M","subject":["Éditique","DHTML (Langage de balisage)","Internet","HTML (Langage de balisage)","Hypermedia","HTML (Document markup language)","Handbooks","DHTML (Document markup language)","JavaScript","web design","web development","programming","web browsers","Dhtml (document markup language)","COMPUTERS","Programming Languages","HTML"],"ia_collection":["americanuniversity-ol","binghamton-ol","china","gwulibraries-ol","inlibrary","internetarchivebooks","johnshopkins-ol","librarygenesis","printdisabled","riceuniversity-ol","rochester-ol","uhmauicollege-ol","unb-ol","uni-ol","universityofarizona-ol","wilsoncollege-ol"],"lendinglibrary":false,"printdisabled":true,"lending_edition":"OL19622119M","lending_identifier":"dynamichtmldefin00good","authors":[{"key":"/authors/OL247064A","name":"Danny Goodman"}],"first_publish_year":1998,"ia":"dynamichtmldefin00good","public_scan":false,"has_fulltext":true},{"key":"/works/OL9559525W","title":"Learning PHP, MySQL & JavaScript","edition_count":9,"cover_id":5724818,"cover_edition_key":"OL23227302M","subject":["PHP (Computer program language)","Web sites","Web site development","Design","MySQL (Electronic resource)","JavaScript (Computer program language)","Mysql (computer program language)","Cascading style sheets","HTML (Document markup language)","Internet programming","Relational databases","Web sites, design","Query languages (Computer science)","Internetprogrammering","JAVASCRIPT","Webbsidor","CSS (märkspråk)","PHP","Webbdesign","Java (computer program language)","Programming","SQL (Computer program language)","PHP (Langage de programmation)","JavaScript (Langage de programmation)","Langages d'interrogation","Sites Web","Développement","Conception","COMPUTERS / Programming Languages / General","JavaScript","Cascading Style Sheets","HTML","MySQL","JavaScript (Computer language)","PHP (Computer language)","Web sites - Design"],"ia_collection":["inlibrary","internetarchivebooks","librarygenesis","printdisabled"],"lendinglibrary":false,"printdisabled":true,"lending_edition":"OL26832372M","lending_identifier":"learningphpmysql0000nixo_4ed","authors":[{"key":"/authors/OL6792534A","name":"Robin Nixon"}],"first_publish_year":2009,"ia":"learningphpmysql0000nixo_4ed","public_scan":false,"has_fulltext":true},{"key":"/works/OL2765872W","title":"JavaScript for dummies","edition_count":8,"cover_id":3863999,"cover_edition_key":"OL1019794M","subject":["JavaScript (Computer program language)","Computer Technology","Nonfiction","Web publishing","COMPUTERS","Programming Languages","VBScript","JavaScript","Electronic book collection","Javascript (computer program language)","Internet, programming"],"ia_collection":["internetarchivebooks","printdisabled","wrlc-ol"],"lendinglibrary":false,"printdisabled":true,"lending_edition":"","lending_identifier":"","authors":[{"key":"/authors/OL406773A","name":"Emily A. Vander Veer"}],"first_publish_year":1996,"ia":"javascriptfordum00vand_1","public_scan":false,"has_fulltext":true},{"key":"/works/OL27032590W","title":"You Don't Know JS Yet","edition_count":7,"cover_id":12539693,"cover_edition_key":"OL36647106M","subject":["JavaScript","programming","coding language"],"ia_collection":[""],"lendinglibrary":false,"printdisabled":false,"lending_edition":"","lending_identifier":"","authors":[{"key":"/authors/OL7405928A","name":"Kyle Simpson"}],"first_publish_year":2019,"ia":null,"public_scan":false,"has_fulltext":false},{"key":"/works/OL15444205W","title":"Eloquent Javascript","edition_count":6,"cover_id":7082166,"cover_edition_key":"OL24411757M","subject":["JavaScript (Computer program language)","Computer science","programming languages","JavaScript","Java (computer program language)"],"ia_collection":["additional_collections","folkscanomy","folkscanomy_computer","folkscanomy_computer_inbox","inlibrary","internetarchivebooks","librarygenesis","printdisabled"],"lendinglibrary":false,"printdisabled":true,"lending_edition":"OL26832992M","lending_identifier":"2018eloquentjavascript","authors":[{"key":"/authors/OL6839743A","name":"Marijn Haverbeke"}],"first_publish_year":2009,"ia":"2018eloquentjavascript","public_scan":true,"has_fulltext":true},{"key":"/works/OL2447712W","title":"Ajax Hacks","edition_count":6,"cover_id":7953452,"cover_edition_key":"OL17928396M","subject":["Desarrollo de sitios Web","JavaScript","JavaScript (Computer program language)","JavaScript (Lenguaje de programación para computadora)","Programmatuurtechniek","Web site development","Web sites","Websites","XML","Ajax (web site development technology)"],"ia_collection":["china","inlibrary","internetarchivebooks","printdisabled"],"lendinglibrary":false,"printdisabled":true,"lending_edition":"OL17928396M","lending_identifier":"ajaxhacks00perr_0","authors":[{"key":"/authors/OL339316A","name":"Bruce W. Perry"}],"first_publish_year":2006,"ia":"ajaxhacks00perr_0","public_scan":false,"has_fulltext":true},{"key":"/works/OL25217275W","title":"Smart Computing with Opensource Platforms","edition_count":6,"cover_id":12438759,"cover_edition_key":"OL33737051M","subject":["Open source software","Logiciels libres","COMPUTERS","Programming Languages","JavaScript","General","MATHEMATICS","TECHNOLOGY","Electricity"],"ia_collection":[""],"lendinglibrary":false,"printdisabled":false,"lending_edition":"","lending_identifier":"","authors":[{"key":"/authors/OL7895777A","name":"Amartya Mukherjee"},{"key":"/authors/OL7775251A","name":"Nilanjan Dey"}],"first_publish_year":2019,"ia":null,"public_scan":false,"has_fulltext":false},{"key":"/works/OL19543260W","title":"JavaScript Absolute Beginner's Guide","edition_count":6,"cover_id":8509497,"cover_edition_key":"OL26833954M","subject":["Web site development","JavaScript (Computer program language)","Javascript (computer program language)","COMPUTERS","Programming Languages","JavaScript","Web","Web Programming","Web Services & APIs"],"ia_collection":[""],"lendinglibrary":false,"printdisabled":false,"lending_edition":"","lending_identifier":"","authors":[{"key":"/authors/OL1482963A","name":"Kirupa Chinnathambi"}],"first_publish_year":2016,"ia":null,"public_scan":false,"has_fulltext":false},{"key":"/works/OL17884433W","title":"Beginning PHP5, Apache, and MySQL Web development","edition_count":6,"cover_id":8195217,"cover_edition_key":"OL21112596M","subject":["COMPUTERS","Programming Languages","PHP (Computer program language)","VBScript","Apache (Computer file : Apache Group)","JavaScript","Web site development","MySQL (Electronic resource)","Web sites, design"],"ia_collection":["binghamton-ol","internetarchivebooks","printdisabled","riceuniversity-ol","uni-ol"],"lendinglibrary":false,"printdisabled":true,"lending_edition":"","lending_identifier":"","authors":[{"key":"/authors/OL2849832A","name":"Elizabeth Naramore"}],"first_publish_year":2005,"ia":"beginningphp5apa0000unse","public_scan":false,"has_fulltext":true}]`);

// {name: '...', author: '...'}
const books = apiBooks.map(apiBook => ({
    name: apiBook.title,
    author: apiBook.authors.map(author => author.name).join(', ')
}));


const renderBookList = (booksToRender) => {
    const $booksList = document.getElementById('books-list');

    $booksList.innerHTML = '';

    booksToRender.forEach(book => {
        $booksList.innerHTML += `
            <li>
                <h3>${book.name}</h3>
                <h5>${book.author}</h5>
            </li>
        `;
    });
}

document.getElementById('search-form').addEventListener('submit', e => {
    e.preventDefault();

    const formData = new FormData(e.target);

    const phrase = formData.get('phrase');

    if (!phrase) {
        // alert('Fraza nie moze byc pusta!');
        renderBookList(books);
        return;
    }

    const foundBooks = books.filter(book => book.name.toLowerCase().includes(phrase.toLowerCase()));

    renderBookList(foundBooks);
});

renderBookList(books);